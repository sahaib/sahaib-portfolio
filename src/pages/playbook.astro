---
import Layout from "@/layouts/layout.astro";
import Navbar from "@/components/navbar/index.astro";
import Footer from "@/components/footer.astro";
import Pattern from "@/components/ui/pattern.astro";
import Box from "@/components/box/index.astro";
import BoxTitle from "@/components/box/title.astro";
import BoxHeader from "@/components/box/header.astro";
import BoxContent from "@/components/box/content.astro";
import Badge from "@/components/ui/badge.astro";
import { LINKEDIN_POSTS } from "@/lib/constants/linkedin-posts";

const title = "InsideTheStack Series My Playbook";
const description = "A LinkedIn series on a practical, experience-driven series for multi-stack builders who refuse to stay confined to a single role or skill. It frames the series as a raw playbook of lessons, architectures, tools, and failures across AI, data, automation, system design, and security, aimed at people who learn by breaking, fixing, and connecting systems in the real world.";
---

<Layout title={title} description={description}>
  <Navbar />
  <main class="mx-auto min-h-screen max-w-5xl px-4" aria-label="Main content">
    <Pattern className="h-14" />

    <Box>
      <BoxHeader>
        <BoxTitle className="text-2xl !font-black">InsideTheStack Series My Playbook</BoxTitle>
      </BoxHeader>
      <BoxContent>
        <p class="text-foreground/70">
          {description}
        </p>
        <div class="mt-4 flex flex-wrap gap-2">
          <Badge>#InsideTheStack</Badge>
          <Badge>#Security</Badge>
          <Badge>#AI</Badge>
          <Badge>#BuildInPublic</Badge>
        </div>
      </BoxContent>
    </Box>

    <Pattern />

    <!-- Grid Layout -->
    <section class="py-6">
      <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3">
        {LINKEDIN_POSTS.map((post, index) => (
          <article class="linkedin-post-card group relative flex flex-col overflow-hidden rounded-lg border border-border bg-card transition-all duration-200 hover:border-primary/50 hover:shadow-lg">
            <!-- Post Header -->
            <div class="flex flex-col gap-1 p-3">
              <div class="flex items-center justify-between">
                <span class="text-xs font-medium text-primary">#{LINKEDIN_POSTS.length - index}</span>
                <span class="text-xs text-foreground/50">
                  {new Date(post.publishedDate).toLocaleDateString('en-US', { 
                    month: 'short', 
                    day: 'numeric'
                  })}
                </span>
              </div>
              <h3 class="line-clamp-2 text-sm font-semibold text-foreground">
                {post.title}
              </h3>
              <h2 class="line-clamp-2 text-sm font-light text-foreground">
                {post.description}
              </h2>
            </div>
            
            <!-- Embed Container -->
            <div class="linkedin-embed-container flex-1 overflow-hidden" set:html={post.embedCode} />
          </article>
        ))}
      </div>
    </section>

    <Pattern />

    <Box>
      <BoxContent className="text-center">
        <p class="text-sm text-foreground/60">
          Follow me on 
          <a 
            href="https://www.linkedin.com/in/sahaibsingh/" 
            target="_blank" 
            rel="noopener noreferrer"
            class="ml-1 text-primary underline underline-offset-2 hover:text-primary/80"
          >
            LinkedIn
          </a>
          for the latest posts in this series.
        </p>
      </BoxContent>
    </Box>
  </main>
  <Footer />
</Layout>

<style>
  .linkedin-embed-container iframe {
    width: 100% !important;
    height: 450px !important;
    border-radius: 0;
  }
  
  .linkedin-post-card {
    min-height: 520px;
  }
  
  /* Hover effect */
  .linkedin-post-card:hover {
    transform: translateY(-2px);
  }
  
  /* Line clamp for title */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  /* Mobile adjustments */
  @media (max-width: 640px) {
    .linkedin-embed-container iframe {
      height: 500px !important;
    }
    .linkedin-post-card {
      min-height: 570px;
    }
  }
</style>